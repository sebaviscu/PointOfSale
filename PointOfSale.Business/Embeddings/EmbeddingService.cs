using System.Net.Http.Headers;
using System.Text.Json;
using System.Text;
using PointOfSale.Model.Embeddings;
using PointOfSale.Business.Utilities;
using PointOfSale.Data.DBContext;
using System.Text.Json.Serialization;

namespace PointOfSale.Business.Embeddings
{
    public class EmbeddingService : IEmbeddingService
    {
        private readonly IUnitOfWork _unitOfWork;
        private readonly HttpClient _httpClient;
        private readonly string _modelEmbeddings = "text-embedding-ada-002"; // Modelo de OpenAI para embeddings
        private readonly string _modelChat = "gpt-3.5-turbo"; // Modelo de OpenAI para embeddings
        private readonly string _urlEmbeddings = "https://api.openai.com/v1/embeddings";
        private readonly string _urlChat = "https://api.openai.com/v1/chat/completions";
        private readonly string _apiKey = ""; // Reemplaza con tu clave de OpenAI

        public EmbeddingService(IUnitOfWork unitOfWork)
        {
            _httpClient = new HttpClient();
            _httpClient.DefaultRequestHeaders.Authorization
                = new AuthenticationHeaderValue("Bearer", _apiKey);
            _unitOfWork = unitOfWork;
        }

        public async Task<OpenAIEmbeddingResponse> GenerateEmbedding(string text)
        {
            var payload = new
            {
                input = text,
                model = _modelEmbeddings
            };

            var jsonPayload = JsonSerializer.Serialize(payload);

            var response = await _httpClient.PostAsync(
                _urlEmbeddings,
                new StringContent(jsonPayload, Encoding.UTF8, "application/json")
            );

            if (!response.IsSuccessStatusCode)
                throw new Exception(await response.Content.ReadAsStringAsync());

            string responseJson = await response.Content.ReadAsStringAsync();

            var jsonResponse = JsonSerializer.Deserialize<OpenAIEmbeddingResponse>(responseJson);
            if (jsonResponse == null || jsonResponse.Data == null || jsonResponse.Data.Count == 0)
                throw new Exception("No se pudo obtener el embedding");

            //var jsonResponse = JsonSerializer.Deserialize<OpenAIEmbeddingResponse>(textoEjemplo);


            return jsonResponse;
        }

        public async Task<string> GenerateResponseAsync(string userQuestion)
        {
            var embeddingQuestion = await GenerateEmbedding(userQuestion);

            var embeddingsList = await GetMostSimilarEmbeddingsAsync(embeddingQuestion.Data[0].Embedding);

            var context = CreateContext(embeddingsList);

            var prompt = $@"
                        Aquí tienes información relevante:
                        {context}

                        Pregunta: '{userQuestion}'
                        Por favor, genera una respuesta basada en la información proporcionada.";

            var gptResponse = await GenerateGptResponseAsync(prompt);

            return gptResponse;
        }
        public Embedding CreateEmbedding(string Reference, string source, float[] embeddingVector, int promptTokens)
        {
            return new Embedding
            {
                Reference = Reference,
                Source = source,
                Vector = ConvertVectorToBinary(embeddingVector),
                CreatedAt = TimeHelper.GetArgentinaTime(),
                PromptTokens = promptTokens
            };
        }

        public async Task SaveRangeEmbeddingAsync(List<Embedding> embeddings)
        {
            var embeddingRepository = _unitOfWork.Repository<Embedding>();
            await embeddingRepository.AddRange(embeddings);
        }

        private async Task<string> GenerateGptResponseAsync(string prompt)
        {
            var payload = new
            {
                model = _modelChat,
                messages = new[]
                {
            new { role = "system", content = "Eres un asistente inteligente que responde preguntas basadas en datos de ventas, gastos y productos." },
            new { role = "user", content = prompt }
        },
                max_tokens = 150,
                temperature = 0.7
            };

            var jsonPayload = JsonSerializer.Serialize(payload);

            var response = await _httpClient.PostAsync(
                _urlChat,
                new StringContent(jsonPayload, Encoding.UTF8, "application/json")
            );

            if (!response.IsSuccessStatusCode)
                throw new Exception(await response.Content.ReadAsStringAsync());

            var responseJson = await response.Content.ReadAsStringAsync();
            var jsonResponse = JsonSerializer.Deserialize<OpenAIChatResponse>(responseJson);

            return jsonResponse.Choices[0].Message.Content;
        }

        private string CreateContext(List<Embedding> similarEmbeddings)
        {
            var contextBuilder = new StringBuilder("Información relevante encontrada:\n");
            foreach (var embedding in similarEmbeddings)
            {
                contextBuilder.AppendLine($"- {embedding.Reference}: {embedding.Source}");
            }

            return contextBuilder.ToString();
        }

        private async Task<List<Embedding>> GetMostSimilarEmbeddingsAsync(float[] questionEmbedding)
        {
            var embeddings = await _unitOfWork.Repository<Embedding>().Query();

            var similarityScores = embeddings.Select(e => new
            {
                Embedding = e,
                Similarity = CosineSimilarity(ConvertBinaryToVector(e.Vector), questionEmbedding)
            })
            .OrderByDescending(x => x.Similarity)
            .Take(5)
            .Select(x => x.Embedding)
            .ToList();

            return similarityScores;
        }

        private double CosineSimilarity(float[] vectorA, float[] vectorB)
        {
            if (vectorA.Length != vectorB.Length)
                throw new ArgumentException("Los vectores deben tener la misma longitud.");

            double dotProduct = 0;
            double magnitudeA = 0;
            double magnitudeB = 0;

            for (int i = 0; i < vectorA.Length; i++)
            {
                dotProduct += vectorA[i] * vectorB[i];
                magnitudeA += Math.Pow(vectorA[i], 2);
                magnitudeB += Math.Pow(vectorB[i], 2);
            }

            magnitudeA = Math.Sqrt(magnitudeA);
            magnitudeB = Math.Sqrt(magnitudeB);

            if (magnitudeA == 0 || magnitudeB == 0)
                return 0;

            return dotProduct / (magnitudeA * magnitudeB);
        }
        private byte[] ConvertVectorToBinary(float[] vector)
        {
            var byteArray = new byte[vector.Length * sizeof(float)];
            Buffer.BlockCopy(vector, 0, byteArray, 0, byteArray.Length);
            return byteArray;
        }

        private float[] ConvertBinaryToVector(byte[] byteArray)
        {
            var vector = new float[byteArray.Length / sizeof(float)];
            Buffer.BlockCopy(byteArray, 0, vector, 0, byteArray.Length);
            return vector;
        }

        public string textoEjemplo => "{\r\n  \"object\": \"list\",\r\n  \"data\": [\r\n    {\r\n      \"object\": \"embedding\",\r\n      \"index\": 0,\r\n      \"embedding\": [\r\n        0.009955269,\r\n        -0.0212629,\r\n        0.0030729445,\r\n        -0.017393267,\r\n        -0.002170811,\r\n        0.0023934154,\r\n        -0.040865473,\r\n        0.0025591133,\r\n        -0.0059115686,\r\n        -0.03256384,\r\n        0.016375648,\r\n        0.028332682,\r\n        0.0032436636,\r\n        0.009165274,\r\n        -0.0055969097,\r\n        0.011361191,\r\n        -0.0025172704,\r\n        -0.02736862,\r\n        0.022186793,\r\n        -0.020620193,\r\n        -0.008576126,\r\n        0.02993945,\r\n        -0.01245915,\r\n        -0.0022929923,\r\n        -0.010430604,\r\n        -0.007846385,\r\n        0.0030411438,\r\n        -0.008676549,\r\n        0.028734375,\r\n        -0.0064772847,\r\n        -0.0025641345,\r\n        -0.0011515173,\r\n        -0.0065609706,\r\n        -0.0055634356,\r\n        -0.013550413,\r\n        0.0067183003,\r\n        -0.02434254,\r\n        -0.015491925,\r\n        0.012787198,\r\n        -0.009854846,\r\n        0.031037409,\r\n        0.01621497,\r\n        0.00763215,\r\n        -0.008710023,\r\n        -0.009426374,\r\n        -0.008549347,\r\n        -0.0064438106,\r\n        -0.002205959,\r\n        -0.027663196,\r\n        0.012512708,\r\n        -0.00494416,\r\n        0.01929461,\r\n        -0.004726577,\r\n        0.016000735,\r\n        0.006015339,\r\n        -0.007658929,\r\n        0.016469376,\r\n        0.004103954,\r\n        -0.024476437,\r\n        -0.0017841824,\r\n        -0.012191355,\r\n        -0.0072438475,\r\n        -0.024436269,\r\n        -0.006202795,\r\n        -0.025038807,\r\n        -0.006942578,\r\n        -0.016161412,\r\n        -0.017955637,\r\n        -0.027007097,\r\n        0.01118043,\r\n        -0.004706492,\r\n        0.018049365,\r\n        0.01981681,\r\n        -0.025427109,\r\n        0.012673385,\r\n        0.0019565753,\r\n        -0.015572263,\r\n        0.0020251975,\r\n        0.0035750596,\r\n        -0.006748427,\r\n        0.021651203,\r\n        -0.038964134,\r\n        -0.0012988044,\r\n        0.018544784,\r\n        0.040838696,\r\n        0.023914069,\r\n        -0.014862607,\r\n        0.017393267,\r\n        -0.03392959,\r\n        0.0027164428,\r\n        0.006651351,\r\n        0.018879527,\r\n        0.025976088,\r\n        0.019950707,\r\n        -0.026163545,\r\n        0.016978186,\r\n        -0.027556077,\r\n        0.029537758,\r\n        0.00469645,\r\n        -0.033420783,\r\n        -0.015933786,\r\n        0.01041052,\r\n        -0.027636416,\r\n        -0.013624056,\r\n        -0.01419312,\r\n        -0.0028486664,\r\n        0.009071547,\r\n        0.0047935257,\r\n        -0.00047826464,\r\n        -0.0177414,\r\n        -0.018303769,\r\n        0.018169872,\r\n        -0.0010000459,\r\n        -0.0055567403,\r\n        0.017379878,\r\n        0.007886555,\r\n        0.023177633,\r\n        0.0038361594,\r\n        -0.017085303,\r\n        -0.037759054,\r\n        0.01929461,\r\n        0.026016258,\r\n        -0.0014561338,\r\n        -0.008281552,\r\n        0.013155416,\r\n        -0.0019549015,\r\n        0.0054897917,\r\n        -0.021517307,\r\n        -0.014581422,\r\n        -0.0016795751,\r\n        -0.0012502666,\r\n        0.019401727,\r\n        0.02689998,\r\n        0.0010184568,\r\n        -0.00006496114,\r\n        0.050157953,\r\n        -0.05516571,\r\n        0.0314391,\r\n        -0.019200882,\r\n        -0.03296553,\r\n        0.008241382,\r\n        0.0117628835,\r\n        -0.013844987,\r\n        0.0049307705,\r\n        0.008750193,\r\n        0.02943064,\r\n        0.001703007,\r\n        0.018437667,\r\n        0.020580025,\r\n        -0.0020837777,\r\n        0.0345723,\r\n        -0.015826669,\r\n        0.010303402,\r\n        0.02292323,\r\n        0.030742833,\r\n        -0.022226961,\r\n        0.011809748,\r\n        0.023900678,\r\n        -0.022454588,\r\n        -0.013871767,\r\n        -0.020754091,\r\n        0.008837226,\r\n        -0.0050680153,\r\n        -0.025587786,\r\n        -0.004361707,\r\n        0.028868271,\r\n        0.014862607,\r\n        0.0023632885,\r\n        -0.0019297957,\r\n        -0.017138863,\r\n        0.0028905093,\r\n        0.012398896,\r\n        -0.003538238,\r\n        0.022909839,\r\n        0.028787933,\r\n        0.011876696,\r\n        -0.020995107,\r\n        -0.020499686,\r\n        -0.001969965,\r\n        -0.03502755,\r\n        -0.010564502,\r\n        0.012686775,\r\n        -0.0011222273,\r\n        0.03264418,\r\n        -0.019415118,\r\n        -0.004254589,\r\n        0.00737105,\r\n        -0.013289313,\r\n        0.013235754,\r\n        -0.012559572,\r\n        0.006253007,\r\n        0.017915467,\r\n        0.02329814,\r\n        -0.00055023446,\r\n        -0.63370943,\r\n        -0.019602574,\r\n        -0.027502518,\r\n        -0.0073777447,\r\n        0.009017987,\r\n        0.025239652,\r\n        0.035081107,\r\n        0.015317858,\r\n        -0.0059718224,\r\n        -0.048095934,\r\n        0.019053595,\r\n        0.0048035677,\r\n        -0.00941968,\r\n        -0.010343571,\r\n        0.003631966,\r\n        -0.041427843,\r\n        0.004120691,\r\n        -0.0013448317,\r\n        -0.020539856,\r\n        0.045819677,\r\n        0.010236453,\r\n        -0.010531028,\r\n        -0.0013916957,\r\n        0.03558992,\r\n        0.025681514,\r\n        -0.005717417,\r\n        0.009486628,\r\n        -0.005265514,\r\n        -0.00028767012,\r\n        0.003755821,\r\n        -0.0098950155,\r\n        -0.01673717,\r\n        0.0284398,\r\n        0.010136031,\r\n        0.048845757,\r\n        -0.037732277,\r\n        0.0017456869,\r\n        0.01720581,\r\n        0.004867169,\r\n        0.02993945,\r\n        -0.0053625894,\r\n        -0.0019515541,\r\n        0.023498988,\r\n        -0.028332682,\r\n        -0.01010925,\r\n        -0.0005950064,\r\n        0.026953539,\r\n        -0.020713922,\r\n        -0.020566635,\r\n        0.006293176,\r\n        0.0043684016,\r\n        0.010156115,\r\n        -0.016643442,\r\n        0.003980099,\r\n        0.041454624,\r\n        0.0024034576,\r\n        0.023030346,\r\n        -0.0077995216,\r\n        -0.012318557,\r\n        0.013871767,\r\n        -0.012820672,\r\n        -0.013235754,\r\n        -0.00964061,\r\n        -0.022722382,\r\n        -0.010577892,\r\n        0.0152643,\r\n        0.0036152287,\r\n        0.019147323,\r\n        0.021129005,\r\n        -0.0015540463,\r\n        -0.0013088468,\r\n        0.029805552,\r\n        -0.039794296,\r\n        0.0076254546,\r\n        0.0037725582,\r\n        0.009613831,\r\n        0.0053592417,\r\n        0.009171969,\r\n        -0.018397497,\r\n        0.020031046,\r\n        0.0042612837,\r\n        0.007257237,\r\n        -0.0059216106,\r\n        0.002590914,\r\n        0.015947176,\r\n        -0.0059517375,\r\n        -0.025078977,\r\n        -0.010356961,\r\n        0.008248078,\r\n        -0.0091318,\r\n        0.005168438,\r\n        0.0062831338,\r\n        0.008904175,\r\n        0.016871067,\r\n        -0.007317491,\r\n        -0.0046462384,\r\n        -0.0050178035,\r\n        0.017701231,\r\n        -0.017661061,\r\n        -0.02795777,\r\n        -0.008676549,\r\n        0.008442229,\r\n        0.03671466,\r\n        0.014447525,\r\n        0.026511678,\r\n        0.032778073,\r\n        -0.015398197,\r\n        -0.0038495492,\r\n        0.030608937,\r\n        -0.03816075,\r\n        0.00034771473,\r\n        -0.00317002,\r\n        -0.016455986,\r\n        -0.028493358,\r\n        -0.0053023356,\r\n        -0.026953539,\r\n        0.00647059,\r\n        0.008207908,\r\n        -0.0075317267,\r\n        -0.019562405,\r\n        0.00343112,\r\n        0.01779496,\r\n        0.028305903,\r\n        -0.0064806323,\r\n        0.006808681,\r\n        -0.004810263,\r\n        -0.006099025,\r\n        0.0059751696,\r\n        -0.0009916773,\r\n        -0.020995107,\r\n        0.017379878,\r\n        -0.0010201306,\r\n        0.012378811,\r\n        -0.019388339,\r\n        0.021142393,\r\n        0.0019431855,\r\n        0.018584954,\r\n        0.01932139,\r\n        0.029859113,\r\n        -0.008254772,\r\n        -0.0077459626,\r\n        -0.015050064,\r\n        0.0024737539,\r\n        -0.00082765304,\r\n        0.010952804,\r\n        -0.024114914,\r\n        0.019749861,\r\n        0.01243237,\r\n        -0.021758322,\r\n        0.024771012,\r\n        -0.0048470846,\r\n        -0.025520837,\r\n        -0.015545484,\r\n        -0.0036754827,\r\n        -0.00026946844,\r\n        -0.011575427,\r\n        -0.018625123,\r\n        -0.018852748,\r\n        -0.016964795,\r\n        -0.009881625,\r\n        -0.0019030162,\r\n        0.036446862,\r\n        -0.020646973,\r\n        -0.0051249214,\r\n        -0.005298988,\r\n        -0.0027515907,\r\n        0.00019760322,\r\n        0.028225563,\r\n        -0.018611733,\r\n        -0.018303769,\r\n        0.011803052,\r\n        -0.008957733,\r\n        0.015130402,\r\n        0.00709656,\r\n        0.0012268346,\r\n        0.017098693,\r\n        0.00037512183,\r\n        0.0022210225,\r\n        0.017500386,\r\n        -0.0054161483,\r\n        0.009761117,\r\n        0.018665291,\r\n        0.0010728526,\r\n        0.03655398,\r\n        0.012552878,\r\n        0.006962663,\r\n        -0.028600477,\r\n        0.045659002,\r\n        -0.022990176,\r\n        0.029323522,\r\n        -0.018437667,\r\n        -0.0021440315,\r\n        0.01717903,\r\n        0.0152643,\r\n        -0.0077392673,\r\n        -0.0048236526,\r\n        -0.0029373735,\r\n        -0.0036754827,\r\n        -0.0074313036,\r\n        -0.0059751696,\r\n        0.014809048,\r\n        0.02641795,\r\n        0.026190324,\r\n        0.009620526,\r\n        0.015157182,\r\n        -0.017085303,\r\n        0.0058044507,\r\n        -0.0076790135,\r\n        0.043007832,\r\n        0.0344384,\r\n        0.018424276,\r\n        -0.015304469,\r\n        -0.009205444,\r\n        -0.002087125,\r\n        -0.003956667,\r\n        0.0064438106,\r\n        0.0061827106,\r\n        -0.0069224937,\r\n        0.015532094,\r\n        -0.019723082,\r\n        -0.00968078,\r\n        -0.020419348,\r\n        0.018986646,\r\n        -0.030046567,\r\n        -0.027716754,\r\n        -0.0026227145,\r\n        0.002513923,\r\n        0.019535625,\r\n        0.008020452,\r\n        -0.0016461007,\r\n        -0.016817508,\r\n        0.005724112,\r\n        0.028038107,\r\n        -0.009921795,\r\n        0.024837961,\r\n        0.013516938,\r\n        0.021155784,\r\n        -0.012057457,\r\n        0.015665991,\r\n        0.0031917784,\r\n        -0.0022963397,\r\n        0.016857678,\r\n        0.033902813,\r\n        -0.031974692,\r\n        0.004465477,\r\n        -0.013054993,\r\n        0.0008862332,\r\n        0.0045458153,\r\n        0.004264631,\r\n        0.006577708,\r\n        0.016509544,\r\n        0.0051450063,\r\n        -0.025507448,\r\n        -0.025721684,\r\n        0.022414418,\r\n        -0.028627256,\r\n        0.0028001287,\r\n        0.011254073,\r\n        -0.00020429808,\r\n        0.014126171,\r\n        0.023954239,\r\n        -0.00006323512,\r\n        0.00089627545,\r\n        -0.010926025,\r\n        0.0028252343,\r\n        0.02537355,\r\n        -0.013858377,\r\n        -0.02237425,\r\n        0.008161045,\r\n        -0.01980342,\r\n        0.009486628,\r\n        -0.018303769,\r\n        0.005697333,\r\n        0.013496854,\r\n        -0.0011088375,\r\n        0.0109594995,\r\n        0.005667206,\r\n        -0.006015339,\r\n        -0.017085303,\r\n        0.00418764,\r\n        -0.023592716,\r\n        -0.02392746,\r\n        0.013262534,\r\n        0.015987346,\r\n        0.008971123,\r\n        0.008830531,\r\n        0.02534677,\r\n        -0.01821004,\r\n        -0.011776273,\r\n        0.024623726,\r\n        0.0036620928,\r\n        -0.0010393782,\r\n        -0.001703007,\r\n        0.002644473,\r\n        -0.0030846605,\r\n        0.008643075,\r\n        0.026605405,\r\n        -0.02589575,\r\n        -0.025279822,\r\n        -0.028145226,\r\n        -0.0022210225,\r\n        -0.00013944154,\r\n        -0.009587051,\r\n        -0.010202979,\r\n        0.028600477,\r\n        0.009225529,\r\n        -0.011421445,\r\n        -0.01973647,\r\n        0.014581422,\r\n        -0.0068287654,\r\n        0.0076455395,\r\n        -0.008214603,\r\n        -0.030689275,\r\n        0.016670221,\r\n        0.0029775426,\r\n        -0.00330057,\r\n        0.009386205,\r\n        -0.028038107,\r\n        0.026766082,\r\n        -0.0011021426,\r\n        -0.00737105,\r\n        -0.0305286,\r\n        -0.0062630493,\r\n        0.0007611228,\r\n        0.01921427,\r\n        0.023565935,\r\n        0.0033675185,\r\n        0.020874599,\r\n        0.011883391,\r\n        -0.0026628838,\r\n        -0.03513467,\r\n        0.007759352,\r\n        0.005884789,\r\n        0.013048298,\r\n        -0.0345723,\r\n        0.0055734776,\r\n        0.02481118,\r\n        0.010564502,\r\n        -0.0018377414,\r\n        -0.01883936,\r\n        -0.0037959903,\r\n        -0.016081072,\r\n        -0.001815983,\r\n        -0.00082263193,\r\n        -0.029028948,\r\n        0.008649769,\r\n        -0.011294243,\r\n        0.053076915,\r\n        0.0067651644,\r\n        0.017513774,\r\n        0.056183334,\r\n        0.044855617,\r\n        0.027556077,\r\n        -0.025507448,\r\n        0.0068823243,\r\n        -0.010765348,\r\n        -0.007578591,\r\n        0.018183261,\r\n        0.013503549,\r\n        0.0029206362,\r\n        -0.0035315428,\r\n        -0.026980318,\r\n        -0.00045274047,\r\n        0.034813315,\r\n        0.0020134817,\r\n        -0.0031499355,\r\n        0.0044688242,\r\n        -0.02688659,\r\n        0.005693985,\r\n        -0.03746448,\r\n        -0.0067919437,\r\n        0.010115946,\r\n        -0.000006541226,\r\n        -0.02489152,\r\n        -0.0056337314,\r\n        -0.00840206,\r\n        -0.015076843,\r\n        -0.013938716,\r\n        0.008489093,\r\n        0.02025867,\r\n        0.0154115865,\r\n        -0.008991208,\r\n        -0.046435606,\r\n        -0.008194518,\r\n        -0.008924259,\r\n        -0.0395265,\r\n        0.01569277,\r\n        0.0073911343,\r\n        -0.0148893865,\r\n        -0.0046931026,\r\n        -0.010182895,\r\n        -0.013677616,\r\n        -0.029243184,\r\n        -0.015465145,\r\n        -0.00054102903,\r\n        -0.0014218226,\r\n        -0.03146588,\r\n        0.010136031,\r\n        0.025842192,\r\n        0.000875354,\r\n        -0.008315026,\r\n        0.00443535,\r\n        0.006801986,\r\n        0.03264418,\r\n        -0.025239652,\r\n        -0.019348169,\r\n        -0.011575427,\r\n        -0.0040370054,\r\n        -0.005375979,\r\n        0.033099428,\r\n        0.016121242,\r\n        -0.010243149,\r\n        -0.012064152,\r\n        -0.015438366,\r\n        0.012264999,\r\n        -0.031251643,\r\n        0.01980342,\r\n        -0.007263932,\r\n        0.0040068785,\r\n        -0.009955269,\r\n        0.009064851,\r\n        0.0025005331,\r\n        -0.0147421,\r\n        -0.0038462018,\r\n        -0.0004903991,\r\n        -0.009560272,\r\n        0.011093397,\r\n        -0.024141693,\r\n        0.0036754827,\r\n        -0.0071166446,\r\n        0.006032076,\r\n        -0.012050763,\r\n        -0.026792862,\r\n        -0.0023683095,\r\n        0.0064036413,\r\n        -0.0054429276,\r\n        0.014554643,\r\n        -0.001449439,\r\n        -0.010189589,\r\n        0.00030838235,\r\n        0.010504248,\r\n        0.0071835937,\r\n        -0.0065341913,\r\n        -0.007578591,\r\n        0.016308699,\r\n        0.006119109,\r\n        0.03500077,\r\n        0.013818208,\r\n        0.016362257,\r\n        0.0026628838,\r\n        0.0027817178,\r\n        -0.026257273,\r\n        -0.009807982,\r\n        0.01879919,\r\n        0.013443295,\r\n        0.008094096,\r\n        -0.0135437185,\r\n        0.015665991,\r\n        -0.021718152,\r\n        -0.021932388,\r\n        -0.018156482,\r\n        0.036125507,\r\n        -0.007404524,\r\n        -0.032242484,\r\n        -0.026632186,\r\n        0.0053927163,\r\n        -0.0006163463,\r\n        -0.016469376,\r\n        -0.010557807,\r\n        -0.030314364,\r\n        -0.015157182,\r\n        0.007076476,\r\n        0.0025708294,\r\n        0.02435593,\r\n        -0.0016578167,\r\n        0.0005381,\r\n        -0.0048035677,\r\n        -0.016670221,\r\n        -0.012572962,\r\n        0.0061492366,\r\n        -0.034143828,\r\n        0.00030796393,\r\n        0.025520837,\r\n        0.014956336,\r\n        0.049327787,\r\n        0.025494058,\r\n        0.023445427,\r\n        0.0019013425,\r\n        -0.017339708,\r\n        0.022735773,\r\n        0.008074011,\r\n        0.032804854,\r\n        -0.022387639,\r\n        0.014621592,\r\n        0.024556777,\r\n        0.03146588,\r\n        0.0127604185,\r\n        -0.017567335,\r\n        -0.0071166446,\r\n        0.0009958616,\r\n        -0.009961964,\r\n        0.0054730545,\r\n        -0.03159978,\r\n        0.0013197259,\r\n        0.019241052,\r\n        -0.010363656,\r\n        -0.00838867,\r\n        0.0091117155,\r\n        -0.03658076,\r\n        -0.013095162,\r\n        0.028466579,\r\n        0.004180945,\r\n        0.0054027587,\r\n        0.009305866,\r\n        0.03090351,\r\n        -0.0284398,\r\n        0.03650042,\r\n        -0.0009866562,\r\n        -0.0029624791,\r\n        -0.010751958,\r\n        0.00087116973,\r\n        -0.018384108,\r\n        -0.042284787,\r\n        0.009741033,\r\n        -0.0071969833,\r\n        0.02589575,\r\n        0.000036115674,\r\n        -0.0034947211,\r\n        -0.008174434,\r\n        0.022186793,\r\n        0.016522935,\r\n        -0.018223431,\r\n        -0.0020821039,\r\n        -0.015076843,\r\n        -0.039847855,\r\n        -0.028466579,\r\n        0.005111532,\r\n        -0.021985946,\r\n        0.0051215743,\r\n        0.01778157,\r\n        -0.0018862791,\r\n        0.018906308,\r\n        -0.012412285,\r\n        -0.02945742,\r\n        0.009794592,\r\n        0.0046763653,\r\n        0.040544122,\r\n        -0.009734338,\r\n        0.034224167,\r\n        0.023271361,\r\n        -0.0045692474,\r\n        -0.02581541,\r\n        0.016067684,\r\n        0.017192421,\r\n        -0.013014823,\r\n        0.017902078,\r\n        0.032296043,\r\n        -0.011575427,\r\n        -0.04528409,\r\n        0.02993945,\r\n        0.014072613,\r\n        -0.014032444,\r\n        -0.011997203,\r\n        0.026658965,\r\n        -0.0011046532,\r\n        0.029725214,\r\n        -0.026658965,\r\n        0.0063199555,\r\n        -0.0060488135,\r\n        0.00964061,\r\n        -0.012358727,\r\n        0.016710391,\r\n        -0.009118411,\r\n        -0.0072170678,\r\n        -0.030555379,\r\n        0.0063433875,\r\n        -0.0050713625,\r\n        0.034840092,\r\n        0.020017656,\r\n        -0.038964134,\r\n        0.009058157,\r\n        -0.0077325725,\r\n        -0.006383557,\r\n        0.018424276,\r\n        -0.014166341,\r\n        0.010838991,\r\n        -0.009325951,\r\n        0.029323522,\r\n        0.010457384,\r\n        -0.013737869,\r\n        -0.011274158,\r\n        0.0022293911,\r\n        0.034331284,\r\n        0.016121242,\r\n        -0.0066580465,\r\n        -0.028466579,\r\n        0.0284398,\r\n        -0.0021607687,\r\n        -0.008509178,\r\n        -0.0017473606,\r\n        -0.011274158,\r\n        -0.017299538,\r\n        -0.02440949,\r\n        -0.007920029,\r\n        -0.007933418,\r\n        0.0053927163,\r\n        -0.008422144,\r\n        0.012773808,\r\n        -0.0048805587,\r\n        -0.048470844,\r\n        -0.020646973,\r\n        -0.018718852,\r\n        0.013329483,\r\n        0.040222768,\r\n        0.0034043405,\r\n        0.0069894423,\r\n        0.021972558,\r\n        0.03403671,\r\n        0.00760537,\r\n        0.0025507447,\r\n        0.018196652,\r\n        0.008696633,\r\n        -0.031090967,\r\n        0.02386051,\r\n        0.0028252343,\r\n        -0.01367092,\r\n        -0.033902813,\r\n        -0.021517307,\r\n        -0.015920397,\r\n        -0.005616994,\r\n        0.021597644,\r\n        -0.017460216,\r\n        -0.013871767,\r\n        0.00007667716,\r\n        0.008080706,\r\n        -0.0009891668,\r\n        -0.018692072,\r\n        0.009332646,\r\n        0.02581541,\r\n        0.023391869,\r\n        0.02076748,\r\n        -0.022052895,\r\n        -0.015358027,\r\n        0.0029976272,\r\n        -0.0059216106,\r\n        -0.01577311,\r\n        0.0028720985,\r\n        -0.034652635,\r\n        -0.0028352765,\r\n        0.010952804,\r\n        0.0123922005,\r\n        -0.0034880263,\r\n        -0.0061525838,\r\n        -0.005717417,\r\n        -0.0010929372,\r\n        0.031680115,\r\n        -0.012887621,\r\n        -0.005616994,\r\n        -0.023030346,\r\n        0.0012988044,\r\n        -0.0056002573,\r\n        0.012934485,\r\n        0.0038997608,\r\n        -0.029644877,\r\n        0.0023114032,\r\n        0.0055969097,\r\n        0.0069559678,\r\n        0.027087437,\r\n        0.0011188799,\r\n        -0.0146082025,\r\n        -0.020379178,\r\n        0.0064806323,\r\n        -0.011013058,\r\n        -0.028627256,\r\n        -0.018973256,\r\n        0.022267131,\r\n        0.014099392,\r\n        -0.017486995,\r\n        -0.0060822875,\r\n        -0.030073348,\r\n        -0.035402462,\r\n        0.009975353,\r\n        -0.018343939,\r\n        0.021932388,\r\n        0.014447525,\r\n        0.0027164428,\r\n        -0.016616663,\r\n        0.022039507,\r\n        -0.017915467,\r\n        0.029644877,\r\n        -0.047480006,\r\n        0.029269964,\r\n        0.0039600143,\r\n        -0.013550413,\r\n        0.016081072,\r\n        -0.024489827,\r\n        -0.030662496,\r\n        -0.022508146,\r\n        0.006406989,\r\n        0.015103622,\r\n        0.048149493,\r\n        0.0054194955,\r\n        -0.028627256,\r\n        -0.008924259,\r\n        0.028841492,\r\n        0.025748463,\r\n        -0.0071300347,\r\n        0.008268162,\r\n        0.020526465,\r\n        -0.024168475,\r\n        -0.024021186,\r\n        -0.013831598,\r\n        0.011140261,\r\n        0.0017239285,\r\n        0.007658929,\r\n        0.00043935073,\r\n        -0.012673385,\r\n        0.0018461099,\r\n        -0.005369284,\r\n        0.0026227145,\r\n        0.00078497326,\r\n        0.0063366927,\r\n        0.020205112,\r\n        0.029885892,\r\n        -0.017018355,\r\n        0.025708294,\r\n        0.0057308073,\r\n        -0.010048997,\r\n        0.005904874,\r\n        0.020111384,\r\n        -0.006577708,\r\n        -0.009044766,\r\n        -0.00139588,\r\n        -0.0054027587,\r\n        0.0039767516,\r\n        -0.029618096,\r\n        0.005968475,\r\n        -0.015250909,\r\n        -0.015384807,\r\n        -0.0054931394,\r\n        -0.005161743,\r\n        -0.034679417,\r\n        -0.011849917,\r\n        0.01672378,\r\n        -0.034197386,\r\n        -0.0066647413,\r\n        -0.018384108,\r\n        0.009948574,\r\n        0.011883391,\r\n        -0.028252343,\r\n        0.0015331248,\r\n        -0.0052086073,\r\n        -0.0243961,\r\n        0.0140860025,\r\n        -0.017714621,\r\n        -0.010986279,\r\n        0.005315725,\r\n        -0.016161412,\r\n        -0.0003891392,\r\n        0.02691337,\r\n        0.18424277,\r\n        0.0127604185,\r\n        -0.02838624,\r\n        0.04327563,\r\n        0.017339708,\r\n        0.03599161,\r\n        0.02897539,\r\n        0.009058157,\r\n        -0.0044286554,\r\n        -0.010363656,\r\n        0.0100021325,\r\n        0.007719183,\r\n        -0.004110649,\r\n        0.011260768,\r\n        0.017420046,\r\n        -0.009781202,\r\n        -0.03360824,\r\n        -0.03403671,\r\n        -0.010591282,\r\n        -0.013349567,\r\n        0.018584954,\r\n        0.01166246,\r\n        -0.0049575497,\r\n        -0.013617362,\r\n        0.034625858,\r\n        -0.039312266,\r\n        -0.009446459,\r\n        0.015170571,\r\n        0.022896448,\r\n        0.0072237626,\r\n        -0.00584462,\r\n        -0.015746329,\r\n        0.018196652,\r\n        0.0021624423,\r\n        -0.026176935,\r\n        -0.005104837,\r\n        0.006370167,\r\n        0.010865771,\r\n        0.021918999,\r\n        0.03299231,\r\n        -0.0032604008,\r\n        -0.0017640977,\r\n        -0.010122641,\r\n        -0.034652635,\r\n        -0.024315761,\r\n        0.027770313,\r\n        -0.011749494,\r\n        -0.009399595,\r\n        0.02029884,\r\n        -0.015639212,\r\n        -0.029564537,\r\n        -0.0015824995,\r\n        -0.0027013794,\r\n        0.029644877,\r\n        -0.0023515725,\r\n        -0.007920029,\r\n        0.01620158,\r\n        -0.0033206546,\r\n        -0.036928892,\r\n        -0.01367092,\r\n        -0.00810079,\r\n        0.007049696,\r\n        -0.012947875,\r\n        0.0011464962,\r\n        -0.009687474,\r\n        -0.010952804,\r\n        -0.028091667,\r\n        0.006085635,\r\n        0.008857311,\r\n        -0.032162145,\r\n        0.023231192,\r\n        -0.0037892954,\r\n        -0.007826301,\r\n        -0.013262534,\r\n        -0.022173403,\r\n        -0.009841456,\r\n        -0.00019247746,\r\n        0.019937318,\r\n        0.0029356997,\r\n        0.018491225,\r\n        0.0073308805,\r\n        -0.0020318925,\r\n        -0.008060621,\r\n        -0.018611733,\r\n        -0.003288854,\r\n        -0.040383443,\r\n        -0.0034679417,\r\n        0.010838991,\r\n        0.00004508575,\r\n        -0.017299538,\r\n        0.008167739,\r\n        -0.0006837134,\r\n        -0.021718152,\r\n        -0.009861541,\r\n        -0.0015699465,\r\n        0.02281611,\r\n        0.008074011,\r\n        0.01883936,\r\n        -0.02386051,\r\n        0.0025189442,\r\n        -0.019629354,\r\n        0.03154622,\r\n        0.016991574,\r\n        -0.001809288,\r\n        -0.011568732,\r\n        0.005406106,\r\n        0.002833603,\r\n        0.017299538,\r\n        0.011053227,\r\n        -0.025534227,\r\n        0.02889505,\r\n        -0.011026448,\r\n        -0.0045558577,\r\n        -0.032242484,\r\n        0.019535625,\r\n        -0.013162111,\r\n        -0.00990171,\r\n        -0.0017825087,\r\n        -0.0039265403,\r\n        -0.0074915574,\r\n        0.024985248,\r\n        -0.022106454,\r\n        -0.011213904,\r\n        -0.0124792345,\r\n        0.015036674,\r\n        -0.019910539,\r\n        -0.012974654,\r\n        -0.0064237257,\r\n        0.0033407393,\r\n        -0.019522235,\r\n        0.012485929,\r\n        0.011100091,\r\n        0.020084605,\r\n        -0.0032721169,\r\n        -0.000039803082,\r\n        -0.00343112,\r\n        0.016081072,\r\n        0.030635716,\r\n        -0.007899945,\r\n        -0.010792128,\r\n        -0.012030678,\r\n        0.0039767516,\r\n        0.008321721,\r\n        -0.008495787,\r\n        0.009044766,\r\n        -0.008716718,\r\n        0.020446127,\r\n        -0.008254772,\r\n        -0.037089568,\r\n        -0.031144526,\r\n        -0.013871767,\r\n        -0.019415118,\r\n        0.0048805587,\r\n        -0.018156482,\r\n        0.032858413,\r\n        -0.0015448409,\r\n        -0.035188228,\r\n        -0.007839691,\r\n        0.018651903,\r\n        -0.014420746,\r\n        -0.03650042,\r\n        -0.022561705,\r\n        0.04472172,\r\n        -0.0020419348,\r\n        -0.031144526,\r\n        -0.0036520506,\r\n        -0.17096016,\r\n        0.020606805,\r\n        -0.008094096,\r\n        -0.011515173,\r\n        0.029805552,\r\n        0.005797756,\r\n        0.026203714,\r\n        0.019790031,\r\n        -0.004140776,\r\n        -0.004097259,\r\n        0.019013425,\r\n        0.019428506,\r\n        -0.020727312,\r\n        -0.003335718,\r\n        0.030608937,\r\n        -0.013336177,\r\n        -0.025159314,\r\n        0.01521074,\r\n        0.03698245,\r\n        0.03093029,\r\n        0.03706279,\r\n        -0.03355468,\r\n        0.016161412,\r\n        -0.020633584,\r\n        -0.001609279,\r\n        0.021892218,\r\n        -0.0018645207,\r\n        -0.00017856469,\r\n        -0.015358027,\r\n        -0.0004489746,\r\n        -0.018223431,\r\n        0.002567482,\r\n        0.0021507263,\r\n        0.0020000918,\r\n        -0.0013523634,\r\n        -0.0089175645,\r\n        -0.0117628835,\r\n        -0.004411918,\r\n        0.000026217209,\r\n        0.030180465,\r\n        0.01170263,\r\n        -0.0018996688,\r\n        -0.0033507815,\r\n        0.020928157,\r\n        -0.012097627,\r\n        0.03093029,\r\n        0.0314391,\r\n        -0.007665624,\r\n        -0.008254772,\r\n        -0.030582158,\r\n        0.016375648,\r\n        -0.035348903,\r\n        0.016429206,\r\n        0.0042612837,\r\n        0.020097993,\r\n        0.015170571,\r\n        -0.010042302,\r\n        -0.0070831706,\r\n        0.0007523358,\r\n        -0.027743533,\r\n        0.0066647413,\r\n        -0.010008828,\r\n        -0.018343939,\r\n        -0.008556042,\r\n        -0.00760537,\r\n        -0.0063433875,\r\n        -0.011220599,\r\n        -0.01831716,\r\n        -0.020700533,\r\n        0.0099820485,\r\n        -0.023070516,\r\n        -0.009834761,\r\n        0.012352032,\r\n        0.013737869,\r\n        -0.0013280945,\r\n        -0.010055692,\r\n        -0.020981716,\r\n        0.0047767884,\r\n        0.032751296,\r\n        -0.010484164,\r\n        -0.02640456,\r\n        0.015826669,\r\n        -0.025025416,\r\n        0.0067450795,\r\n        -0.012003899,\r\n        0.007812911,\r\n        0.00710995,\r\n        0.0024352584,\r\n        0.021530695,\r\n        -0.022253742,\r\n        0.0017825087,\r\n        -0.028734375,\r\n        0.0051717856,\r\n        -0.016603272,\r\n        0.013135331,\r\n        0.0034143827,\r\n        -0.013269229,\r\n        -0.014675151,\r\n        -0.0035281954,\r\n        -0.008984513,\r\n        -0.0035951443,\r\n        0.0077861315,\r\n        -0.00481361,\r\n        0.015505315,\r\n        0.034304503,\r\n        0.037759054,\r\n        -0.001118043,\r\n        0.021731542,\r\n        0.027850652,\r\n        -0.015665991,\r\n        -0.0182636,\r\n        0.016978186,\r\n        0.020593414,\r\n        0.03251028,\r\n        -0.013356262,\r\n        0.019013425,\r\n        -0.018879527,\r\n        -0.012037373,\r\n        0.005784366,\r\n        -0.0043851384,\r\n        0.02692676,\r\n        -0.033768915,\r\n        -0.0049408125,\r\n        0.03312621,\r\n        -0.003702262,\r\n        -0.019348169,\r\n        -0.058165014,\r\n        -0.0018143093,\r\n        -0.0010937741,\r\n        0.014527864,\r\n        -0.01138797,\r\n        0.014782269,\r\n        -0.00635343,\r\n        0.030367922,\r\n        0.015117012,\r\n        0.018866139,\r\n        -0.024556777,\r\n        -0.03350112,\r\n        -0.007565201,\r\n        0.0072237626,\r\n        0.05832569,\r\n        0.012894316,\r\n        -0.00571407,\r\n        -0.009674084,\r\n        -0.0032436636,\r\n        0.02281611,\r\n        -0.020057825,\r\n        -0.011361191,\r\n        -0.0069760527,\r\n        -0.008676549,\r\n        -0.014768879,\r\n        -0.019334778,\r\n        -0.02838624,\r\n        0.03098385,\r\n        0.011280852,\r\n        0.010464079,\r\n        0.013396431,\r\n        0.004632849,\r\n        0.04215089,\r\n        -0.0054630125,\r\n        0.009118411,\r\n        -0.008167739,\r\n        -0.032296043,\r\n        -0.016295308,\r\n        -0.007926724,\r\n        -0.022106454,\r\n        0.013229059,\r\n        -0.0065375385,\r\n        0.010276622,\r\n        -0.022052895,\r\n        0.01420651,\r\n        -0.0133696515,\r\n        -0.008368585,\r\n        -0.022708993,\r\n        -0.009252308,\r\n        -0.040892255,\r\n        0.0032771379,\r\n        -0.011321022,\r\n        0.007103255,\r\n        -0.027529297,\r\n        0.019374948,\r\n        -0.006038771,\r\n        -0.003454552,\r\n        0.013269229,\r\n        -0.03098385,\r\n        -0.029082507,\r\n        -0.02083443,\r\n        0.008857311,\r\n        -0.0076187598,\r\n        0.024784401,\r\n        0.0016410796,\r\n        -0.0019415118,\r\n        -0.0172192,\r\n        -0.006494022,\r\n        -0.0041139964,\r\n        -0.008167739,\r\n        0.0068756295,\r\n        0.01371109,\r\n        -0.007565201,\r\n        -0.008910869,\r\n        -0.005874747,\r\n        0.01724598,\r\n        -0.032938752,\r\n        -0.01725937,\r\n        0.0054864446,\r\n        -0.018196652,\r\n        -0.016871067,\r\n        -0.018049365,\r\n        -0.02681964,\r\n        0.016670221,\r\n        0.013858377,\r\n        0.02130307,\r\n        -0.0013297682,\r\n        0.0136307515,\r\n        0.013429905,\r\n        -0.04212411,\r\n        0.007766047,\r\n        0.009325951,\r\n        0.0038127273,\r\n        0.012097627,\r\n        -0.024088135,\r\n        0.013804818,\r\n        -0.011475004,\r\n        0.01340982,\r\n        0.02182527,\r\n        -0.0019331431,\r\n        -0.03655398,\r\n        -0.013751259,\r\n        -0.08687261,\r\n        0.024757622,\r\n        0.00054270274,\r\n        0.02237425,\r\n        -0.014327018,\r\n        -0.0027281588,\r\n        0.0069559678,\r\n        -0.0106983995,\r\n        -0.0010427258,\r\n        0.0013808166,\r\n        -0.032804854,\r\n        0.025038807,\r\n        -0.01340982,\r\n        -0.030046567,\r\n        -0.04271326,\r\n        -0.011006363,\r\n        0.01192356,\r\n        0.013583887,\r\n        0.024784401,\r\n        0.010417215,\r\n        0.016576493,\r\n        -0.0035616697,\r\n        -0.0029741952,\r\n        -0.0011188799,\r\n        -0.022708993,\r\n        0.024744233,\r\n        -0.0049843295,\r\n        0.017527165,\r\n        0.009667389,\r\n        -0.008435533,\r\n        0.0101761995,\r\n        -0.013014823,\r\n        -0.007551811,\r\n        0.045525104,\r\n        -0.012244914,\r\n        -0.018464446,\r\n        -0.016790729,\r\n        -0.0014276806,\r\n        0.017353099,\r\n        -0.015746329,\r\n        -0.0131085515,\r\n        -0.012907705,\r\n        0.008649769,\r\n        -0.016228361,\r\n        -0.008971123,\r\n        0.003631966,\r\n        0.0076857083,\r\n        0.006246312,\r\n        0.015960565,\r\n        0.011843221,\r\n        0.015197351,\r\n        0.00863638,\r\n        0.004950855,\r\n        -0.02236086,\r\n        0.009446459,\r\n        -0.027582856,\r\n        0.00040231974,\r\n        0.008991208,\r\n        0.016897848,\r\n        -0.01140136,\r\n        0.031144526,\r\n        0.011575427,\r\n        0.024315761,\r\n        -0.016790729,\r\n        -0.013443295,\r\n        -0.012854147,\r\n        -0.02534677,\r\n        -0.01468854,\r\n        0.020272061,\r\n        -0.04073158,\r\n        -0.008977818,\r\n        -0.024690673,\r\n        -0.004632849,\r\n        0.005981865,\r\n        0.011977119,\r\n        0.003247011,\r\n        0.01879919,\r\n        -0.018464446,\r\n        -0.0070898654,\r\n        0.04860474,\r\n        0.027234724,\r\n        0.0022946661,\r\n        -0.033795696,\r\n        -0.0034411622,\r\n        0.014501085,\r\n        0.060200255,\r\n        -0.0015858469,\r\n        -0.008355196,\r\n        0.00507471,\r\n        0.015250909,\r\n        -0.034143828,\r\n        0.016978186,\r\n        -0.028654035,\r\n        -0.02790421,\r\n        -0.00076488865,\r\n        0.011716019,\r\n        0.014527864,\r\n        -0.0043851384,\r\n        0.009446459,\r\n        0.034679417,\r\n        0.011977119,\r\n        0.01973647,\r\n        -0.027663196,\r\n        -0.0022980135,\r\n        -0.017045135,\r\n        -0.0047500087,\r\n        -0.015840057,\r\n        -0.010651535,\r\n        0.011033143,\r\n        0.0011933602,\r\n        0.013436601,\r\n        -0.0154115865,\r\n        -0.0036654403,\r\n        0.016603272,\r\n        -0.026257273,\r\n        0.021985946,\r\n        -0.010751958,\r\n        -0.014313628,\r\n        -0.030394701,\r\n        0.07557167,\r\n        -0.009540187,\r\n        0.026658965,\r\n        0.010390435,\r\n        -0.0044520875,\r\n        0.017955637,\r\n        0.032215707,\r\n        0.009038072,\r\n        -0.02688659,\r\n        0.026672354,\r\n        -0.014862607,\r\n        -0.004897296,\r\n        0.014501085,\r\n        0.0033022438,\r\n        -0.015933786,\r\n        -0.030582158,\r\n        0.0026427992,\r\n        0.0033156334,\r\n        0.0009983722,\r\n        0.015009894,\r\n        0.0954956,\r\n        0.014809048,\r\n        -0.00077702315,\r\n        0.01064484,\r\n        0.0064672427,\r\n        -0.0054194955,\r\n        -0.008549347,\r\n        0.014407356,\r\n        -0.008408754,\r\n        -0.02028545,\r\n        0.020419348,\r\n        0.0064438106,\r\n        0.0023147506,\r\n        -0.01573294,\r\n        -0.037169907,\r\n        0.0019331431,\r\n        0.012164575,\r\n        -0.0043516643,\r\n        -0.035643477,\r\n        -0.0019498804,\r\n        0.01573294,\r\n        -0.01016281,\r\n        0.013429905,\r\n        0.003524848,\r\n        -0.027663196,\r\n        -0.004050395,\r\n        0.007464778,\r\n        0.00964061,\r\n        -0.00968078,\r\n        -0.055647742,\r\n        0.0047399667,\r\n        0.02177171,\r\n        -0.021115614,\r\n        -0.01269347,\r\n        -0.0038930657,\r\n        -0.028198784,\r\n        -0.004796873,\r\n        0.0002673763,\r\n        0.027234724,\r\n        0.014246679,\r\n        -0.0018963214,\r\n        0.03963362,\r\n        -0.037785836,\r\n        0.01925444,\r\n        -0.014755489,\r\n        -0.010223064,\r\n        0.0044085705,\r\n        -0.016549714,\r\n        -0.01720581\r\n      ]\r\n    }\r\n  ],\r\n  \"model\": \"text-embedding-ada-002\",\r\n  \"usage\": {\r\n    \"prompt_tokens\": 111,\r\n    \"total_tokens\": 111\r\n  }\r\n}";
    }

    public class OpenAIEmbeddingResponse
    {
        [JsonPropertyName("data")]
        public List<OpenAIEmbeddingData> Data { get; set; }

        [JsonPropertyName("usage")]
        public OpenAIEmbeddingUsage Usage { get; set; }
    }

    public class OpenAIEmbeddingData
    {
        [JsonPropertyName("embedding")]
        public float[] Embedding { get; set; }
    }

    public class OpenAIEmbeddingUsage
    {
        [JsonPropertyName("prompt_tokens")]
        public int PromptTokens { get; set; }

        [JsonPropertyName("total_tokens")]
        public int TotalTokens { get; set; }
    }

    public class OpenAIChatResponse
    {
        [JsonPropertyName("choices")]
        public List<ChatChoice> Choices { get; set; }
    }

    public class ChatChoice
    {
        [JsonPropertyName("message")]
        public ChatMessage Message { get; set; }
    }

    public class ChatMessage
    {
        [JsonPropertyName("content")]
        public string Content { get; set; }
    }
}
